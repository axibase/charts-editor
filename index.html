<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <link type="text/css" rel="stylesheet" href="./dist/editor.main.css" />
    <title>Monaco Charts</title>
</head>
<body>
    <h2>Monaco Charts</h2>
    <div id="container" style="width:800px;height:600px;border:1px solid grey"></div>
    <script src="./dist/main.js"></script>
    <script>
        self.MonacoEnvironment = {
            getWorker: function (moduleId, label) {
                if (label === "axibaseCharts") {
                    return new Worker('./dist/charts.worker.js')
                }

                return new Worker('./dist/editor.worker.js')
            }
        };
        monaco.editor.create(
            document.getElementById("container"),
            {
                theme: "chartsTheme",
                value: `/*
  The Trends service relies on Axibase Times Series Database for essential data storage and processing tasks.
  The service uses the FRED® API by the Federal Reserve Bank of St. Louis. It is not endorsed or certified by the Bank.
  By using this service, you are agreeing to comply with the FRED® API Terms of Use at https://research.stlouisfed.org/docs/api/terms_of_use.html.
*/
[configuration]
  height-units = 4
  width-units = 1
  offset-right = 40
  starttime = 2017-10-01T00:00:00Z
  endtime = 2019
  markers = false
  entity = fred.stlouisfed.org
  legend-value = false

  script
    window.userFunction = function () {
      hello();
    };
  endscript
  
[group]
  [widget]
    title = Economic Policy Uncertainty Index (China)
    metric = CHIEPUINDXM_
    type = chart
    label = CHIEPUINDXM    
    
    [series]
      style = stroke-width: 2
      color = black
      alias = monthly_avg
      
    [series]
      axis = left
      statistic = wtavg
      period = .25 year
      mode = column
      color = green
      style = opacity: 0.5
      alert-expression = value > value('monthly_avg')
      alert-style = color: red
      pointer-position = false
      
    [dropdown]
      options = @{range(1997, 2019)}
      change-field = starttime
    [dropdown]
      options = @{range(1997, 2019)}
      change-field = endtime       
[group]
  [widget]
    title = Economic Policy Uncertainty Index (Russia)
    metric = RUSEPUINDXM_
    type = chart
    label = RUSEPUINDXM
    
    [series]
      style = stroke-width: 2
      color = black
      alias = monthly_avg
      
    [series]
      axis = left
      statistic = wtavg
      period = .25 year
      mode = column
      color = green
      style = opacity: 0.5
      alert-expression = value > value('monthly_avg')
      alert-style = color: red
      pointer-position = false
      
    [dropdown]
      options = @{range(1997, 2019)}
      change-field = starttime
    [dropdown]
      options = @{range(1997, 2019)}
      change-field = endtime        
      
[group]
  [widget]
    title = Economic Policy Uncertainty Index (United States)
    metric = USEPUINDXD_
    starttime = 1997
    endtime = 2019
    type = chart
    label = USEPUINDXD
    
    [series]
      style = stroke-width: 2
      color = black
      alias = monthly_avg
      
    [series]
      axis = left
      statistic = wtavg
      period = .25 year
      mode = column 
      color = green
      style = opacity: 0.5
      alert-expression = value > value('monthly_avg')
      alert-style = color: red
      pointer-position = false 
      
    [dropdown]
      options = @{range(1997, 2019)}
      change-field = starttime
    [dropdown]
      options = @{range(1997, 2019)}
      change-field = endtime        
      
[group]
  [widget]
    title = Economic Policy Uncertainty Index (Europe)
    entity = fred.stlouisfed.org
    metric = EUEPUINDXM_
    starttime = 1997
    endtime = 2019
    markers = false
    type = chart
    label = EUEPUINDXM
    [series]
      style = stroke-width: 2
      color = black
      alias = monthly_avg
      
    [series]
      axis = left
      statistic = wtavg
      period = .25 year
      mode = column
      color = green
      style = opacity: 0.5
      alert-expression = value > value('monthly_avg')
      alert-style = color: red
      pointer-position = false`,
                language: "axibaseCharts"
            }
        );
    </script>
</body>
</html>